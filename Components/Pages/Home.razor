@page "/"
@using MeTenTenMaui.Services
@inject IAuthService AuthService
@inject NavigationManager Navigation

<PageTitle>홈 - MeTenTen</PageTitle>

<div class="welcome-container">
    <div class="welcome-header">
        <h1>💕 MeTenTen에 오신 것을 환영합니다</h1>
        <p class="welcome-subtitle">10분간 마음을 적고 10분간 대화를 나누는 부부 소통 앱</p>
    </div>

    <div class="dashboard-cards">
        <div class="card">
            <div class="card-body">
                <h3 class="card-title">💕 10&10</h3>
                <p class="card-text">10분간 마음을 적고 10분간 대화를 나누는 부부 소통의 시간입니다.</p>
                <a href="/tenten" class="btn btn-primary">10&10 시작하기</a>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h3 class="card-title">😊 느낌 표현</h3>
                <p class="card-text">오늘의 감정과 느낌을 자유롭게 표현하고 공유해보세요.</p>
                <a href="/feeling" class="btn btn-primary">느낌 표현하기</a>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h3 class="card-title">🙏 주요 기도문</h3>
                <p class="card-text">부부를 위한 기도문과 영적 성장을 위한 자료를 확인해보세요.</p>
                <a href="/prayer" class="btn btn-primary">기도문 보기</a>
            </div>
        </div>
    </div>

    <div class="partner-info">
        <h3>💖 Marriage Encounter</h3>
        <p>10&10은 Marriage Encounter에서 시작된 부부 소통 방법입니다.</p>
        <p>10분간 편지를 쓰고, 편지를 교환한 후 10분간 대화를 나누는 시간을 통해 서로의 마음을 더 깊이 이해할 수 있습니다.</p>
    </div>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        // 인증 체크 - 로그인하지 않은 경우 로그인 페이지로 이동
        if (!AuthService.IsAuthenticated)
        {
            var autoLoginSuccess = await AuthService.TryAutoLoginAsync();
            if (!autoLoginSuccess)
            {
                Navigation.NavigateTo("/login", forceLoad: true);
            }
        }
    }
}
